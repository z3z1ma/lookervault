# LookerVault Configuration Example
# Copy this file to one of the following locations:
#   1. ./lookervault.toml (current working directory)
#   2. ~/.lookervault/config.toml (user home directory)
#   3. Custom path via --config flag or LOOKERVAULT_CONFIG environment variable

# Looker API Configuration
[looker]
# Looker API base URL (do NOT include /api/* path)
# Can also be set via LOOKERVAULT_API_URL or LOOKER_BASE_URL environment variable
api_url = "https://looker.example.com:19999"

# Credentials - STRONGLY RECOMMENDED to set via environment variables instead:
#   LOOKERVAULT_CLIENT_ID or LOOKER_CLIENT_ID
#   LOOKERVAULT_CLIENT_SECRET or LOOKER_CLIENT_SECRET
client_id = ""
client_secret = ""

# Connection settings
timeout = 120  # seconds (increased for large instances)
verify_ssl = true

# Restore Operation Defaults
# These values can be overridden by CLI flags
[restore]
workers = 8                    # Number of parallel worker threads (1-32)
rate_limit_per_minute = 120    # API rate limit per minute
rate_limit_per_second = 10     # Burst rate limit per second
checkpoint_interval = 100      # Save checkpoint every N items
max_retries = 5                # Maximum retry attempts for transient errors

# Environment Variable Reference:
#
# Credentials (preferred method):
#   LOOKERVAULT_CLIENT_ID or LOOKER_CLIENT_ID
#   LOOKERVAULT_CLIENT_SECRET or LOOKER_CLIENT_SECRET
#   LOOKERVAULT_API_URL or LOOKER_BASE_URL
#
# Database:
#   LOOKERVAULT_DB_PATH (default: "looker.db")
#
# Configuration:
#   LOOKERVAULT_CONFIG (path to this config file)
#   LOOKERVAULT_TIMEOUT (connection timeout in seconds)
#
# Priority Order:
#   1. Command-line flags
#   2. Environment variables
#   3. Config file values
#   4. Hardcoded defaults
#
# GCS Snapshot Storage Configuration
[snapshot]
# GCS Storage Provider Configuration
# Note: Optional - will use default Application Default Credentials (ADC) if not specified
bucket_name = "lookervault-backups"    # GCS bucket for snapshot storage
project_id = ""                        # Optional: GCP project ID (auto-detected from credentials if not set)
region = "us-central1"                 # GCS bucket region
storage_class = "STANDARD"             # Initial storage class
autoclass_enabled = true               # Enable GCS Autoclass for automatic storage tier optimization
prefix = "snapshots/"                  # Object name prefix for snapshots
filename_prefix = "looker"             # Prefix for snapshot filenames

# Snapshot Compression
compression_enabled = true             # Enable gzip compression
compression_level = 6                  # Compression level (1=fastest, 9=best compression)

# Retention Policy
[snapshot.retention]
min_days = 30                          # Minimum retention period in days
max_days = 90                          # Maximum retention period in days
min_count = 5                          # Minimum number of snapshots to always retain
lock_policy = false                    # Whether to lock retention policy (CAUTION: Irreversible)
enabled = true                         # Enable retention policy enforcement

# Snapshot Listing Cache
cache_ttl_minutes = 5                 # Local cache TTL for snapshot listings (in minutes)

# Audit Logging
audit_log_path = "~/.lookervault/audit.log"  # Path to local audit log file
audit_gcs_bucket = ""                  # Optional: GCS bucket for centralized audit logs
